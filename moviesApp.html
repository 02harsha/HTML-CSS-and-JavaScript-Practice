<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies</title>
    <style>
        *{
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        input{
            width: 70%;
            border: 0;
            box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
            padding: 20px;
            text-align: center;
            border-radius: 20px;


        }
        .searchBar{
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #movies{
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 30px;
        }
        
        .movie-card{
            display: grid;
            justify-content: center;
            align-items: center;
            width: 350px;
            height: auto;
        }
        .movie-card img,h1{
            width: 70%;
            height: max-content;
        }
        .loader {
            display: none;
            border: 16px solid #f3f3f3; /* Light grey */
            border-top: 16px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 120px;
            height: 120px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
        }
    </style>
    
</head>
<body>
    <div class="searchBar">
        <input type="text" id="searchMovie" onchange="searchMovie()">
    </div>
    <div id="movies">
        <div class="loader"></div>
    </div>
</body>
<script>
    
    function display(array){
        let displayMovies=document.getElementById('movies')
        displayMovies.innerHTML=''
        console.log(displayMovies)
        array.forEach((movie)=>{
            
            card=`<div class='movie-card'>
                    <img src=${movie.Poster}>
                    <h3>${movie.Title}</h3>
                    <p>${movie.Year}</p>
                </div>`
            displayMovies.innerHTML=displayMovies.innerHTML+card
        })
    }
    function NotFound(){
        let NotFound=document.getElementById('movies')
        NotFound.innerHTML='<p>Movie Not Found</p>'
    }
    const moviesData=async (query)=>{
        const res=await fetch(`http://www.omdbapi.com/?i=tt3896198&apikey=1fb3a1f6&s=${query}`)
        const movie=await res.json()
        if (movie.Search){
            display(movie.Search)
        }
        else{
            NotFound()
        }
        
    }
    
    function debounce(moviesData,delay){
        let timeoutId;
        return function(arg){
            clearTimeout(timeoutId)
            timeoutId=setTimeout(()=>{
                moviesData(arg)
            },delay)
        }
    }
    const query=document.getElementById('searchMovie')
    
    query.addEventListener('keyup',()=>{
        document.querySelector('.loader').style.display = 'block';
        sendData(event.target.value)
    })
    let sendData= debounce(moviesData,1000)
</script>
</html>


<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies</title>
    <style>
        * {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        input {
            width: 70%;
            border: 0;
            box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
            padding: 20px;
            text-align: center;
            border-radius: 20px;
        }
        .searchBar {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #movies {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 30px;
        }
        .movie-card {
            display: grid;
            justify-content: center;
            align-items: center;
            width: 350px;
            height: auto;
        }
        .movie-card img, h1 {
            width: 70%;
            height: max-content;
        }
        .loader {
            display: none;
            border: 16px solid #f3f3f3; /* Light grey */
            border-top: 16px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 120px;
            height: 120px;
            animation: spin 2s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="searchBar">
        <input type="text" id="searchMovie" placeholder="Search for movies...">
    </div>
    <div class="loader"></div>
    <div id="movies"></div>
</body>
<script>
    function display(array) {
        let displayMovies = document.getElementById('movies');
        displayMovies.innerHTML = '';
        array.forEach((movie) => {
            let card = `<div class='movie-card'>
                            <img src="${movie.Poster}" alt="${movie.Title}">
                            <h3>${movie.Title}</h3>
                            <p>${movie.Year}</p>
                        </div>`;
            displayMovies.innerHTML += card;
        });
        document.querySelector('.loader').style.display = 'none'; // Hide loader
    }

    function NotFound() {
        let NotFound = document.getElementById('movies');
        NotFound.innerHTML = '<p>Movie Not Found</p>';
        document.querySelector('.loader').style.display = 'none'; // Hide loader
    }

    const moviesData = async (query) => {
        const res = await fetch(`http://www.omdbapi.com/?i=tt3896198&apikey=1fb3a1f6&s=${query}`);
        const movie = await res.json();
        if (movie.Search) {
            display(movie.Search);
        } else {
            NotFound();
        }
    }

    function debounce(moviesData, delay) {
        let timeoutId;
        return function(arg) {
            clearTimeout(timeoutId);
            timeoutId = setTimeout(() => {
                moviesData(arg);
            }, delay);
        };
    }

    const query = document.getElementById('searchMovie');
    query.addEventListener('keyup', (event) => {
        document.querySelector('.loader').style.display = 'block'; // Show loader
        sendData(event.target.value);
    });

    let sendData = debounce(moviesData, 1000);
</script>
</html> -->

